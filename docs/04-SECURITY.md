# GÃ¼venlik

<div align="center">

## ğŸ” Security Documentation

**GÃ¼venlik Mimarisi ve Uyumluluk**

---

</div>

## ğŸ“‹ GÃ¼venlik Ã–zeti

Payment Gateway, **PCI-DSS** standartlarÄ±na uygun, **Ã§ok katmanlÄ±** gÃ¼venlik mimarisi ile tasarlanmÄ±ÅŸtÄ±r.

---

## ğŸ›¡ï¸ GÃ¼venlik KatmanlarÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SECURITY ARCHITECTURE                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Layer 1: NETWORK SECURITY                              â”‚    â”‚
â”‚  â”‚  â€¢ TLS 1.3 encryption                                   â”‚    â”‚
â”‚  â”‚  â€¢ WAF (Web Application Firewall)                       â”‚    â”‚
â”‚  â”‚  â€¢ DDoS protection                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Layer 2: APPLICATION SECURITY                          â”‚    â”‚
â”‚  â”‚  â€¢ API Authentication (X-Merchant-Id + API Key)         â”‚    â”‚
â”‚  â”‚  â€¢ Rate Limiting                                        â”‚    â”‚
â”‚  â”‚  â€¢ Input Validation                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Layer 3: TRANSACTION SECURITY                          â”‚    â”‚
â”‚  â”‚  â€¢ 3D Secure 2.0                                        â”‚    â”‚
â”‚  â”‚  â€¢ Idempotency (Replay Protection)                      â”‚    â”‚
â”‚  â”‚  â€¢ Fraud Detection                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Layer 4: DATA SECURITY                                 â”‚    â”‚
â”‚  â”‚  â€¢ Card Tokenization (No PAN storage)                   â”‚    â”‚
â”‚  â”‚  â€¢ AES-256 encryption at rest                           â”‚    â”‚
â”‚  â”‚  â€¢ Data Masking                                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Layer 5: AUDIT & MONITORING                            â”‚    â”‚
â”‚  â”‚  â€¢ Complete Audit Trail                                 â”‚    â”‚
â”‚  â”‚  â€¢ Real-time Alerting                                   â”‚    â”‚
â”‚  â”‚  â€¢ Correlation ID Tracking                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ 3D Secure 2.0

### Nedir?
3D Secure, kart sahibinin kimliÄŸini doÄŸrulayan ek bir gÃ¼venlik katmanÄ±dÄ±r.

### AkÄ±ÅŸ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      3D SECURE FLOW                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ MÃ¼ÅŸteri â”‚â”€â”€â”€â–¶â”‚ Gateway â”‚â”€â”€â”€â–¶â”‚  Banka  â”‚â”€â”€â”€â–¶â”‚3DS Page â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚       â”‚              â”‚              â”‚              â”‚              â”‚
â”‚       â”‚              â”‚              â”‚              â”‚              â”‚
â”‚       â”‚  1. Authorize Request      â”‚              â”‚              â”‚
â”‚       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚              â”‚
â”‚       â”‚              â”‚              â”‚              â”‚              â”‚
â”‚       â”‚              â”‚  2. REQUIRES_3DS           â”‚              â”‚
â”‚       â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚
â”‚       â”‚              â”‚              â”‚              â”‚              â”‚
â”‚       â”‚  3. Redirect to 3DS        â”‚              â”‚              â”‚
â”‚       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚              â”‚
â”‚       â”‚              â”‚              â”‚              â”‚              â”‚
â”‚       â”‚  4. OTP SayfasÄ±            â”‚              â”‚              â”‚
â”‚       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚
â”‚       â”‚              â”‚              â”‚              â”‚              â”‚
â”‚       â”‚  5. OTP GiriÅŸi (SMS ile gelen kod)       â”‚              â”‚
â”‚       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
â”‚       â”‚              â”‚              â”‚              â”‚              â”‚
â”‚       â”‚  6. DoÄŸrulama              â”‚              â”‚              â”‚
â”‚       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚
â”‚       â”‚              â”‚              â”‚              â”‚              â”‚
â”‚       â”‚              â”‚  7. Verified â”‚              â”‚              â”‚
â”‚       â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
â”‚       â”‚              â”‚              â”‚              â”‚              â”‚
â”‚       â”‚  8. Payment Complete       â”‚              â”‚              â”‚
â”‚       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚              â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3DS Session GÃ¼venliÄŸi

| Ã–zellik | DeÄŸer | AÃ§Ä±klama |
|---------|-------|----------|
| **Session Timeout** | 5 dakika | SÃ¼resi dolan session geÃ§ersiz |
| **Max Attempts** | 3 | 3 hatalÄ± denemede session bloke |
| **OTP Length** | 6 karakter | Banka SMS'i ile gÃ¶nderilen kod |
| **Session ID** | UUID | Tahmin edilemez unique ID |

### 3DS DurumlarÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PENDING  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ VERIFIED â”‚         â”‚ BLOCKED  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                         â–²
     â”‚                                         â”‚
     â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ EXPIRED  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     (5 dk sonra)
```

---

## ğŸ”‘ API GÃ¼venliÄŸi

### Authentication

```http
POST /v1/payments
X-Merchant-Id: TRENDYOL
X-API-Key: sk_live_xxxxxxxxxxxxxxxxxxxx
```

### Header Gereksinimleri

| Header | Zorunlu | AÃ§Ä±klama |
|--------|---------|----------|
| `X-Merchant-Id` | âœ… | Merchant tanÄ±mlayÄ±cÄ± |
| `X-API-Key` | âœ… | API anahtarÄ± (Production) |
| `Idempotency-Key` | âš ï¸ | Ã–nerilen (Replay korumasÄ±) |
| `X-Correlation-Id` | âŒ | Opsiyonel (Tracking) |

### Rate Limiting

| Endpoint | Limit | Window |
|----------|-------|--------|
| `/v1/payments` (POST) | 100/min | Per merchant |
| `/v1/payments/{id}` (GET) | 1000/min | Per merchant |
| `/v1/payments/{id}/authorize` | 50/min | Per merchant |

---

## ğŸ”„ Idempotency (Replay Protection)

### Problem
AÄŸ hatasÄ± nedeniyle client isteÄŸi tekrar gÃ¶nderirse, **aynÄ± iÅŸlem iki kez yapÄ±labilir**.

### Ã‡Ã¶zÃ¼m

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IDEMPOTENCY FLOW                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Ä°stek 1 (Idempotency-Key: abc123)                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  1. Key cache'de var mÄ±? â†’ HAYIR                                â”‚
â”‚  2. Ä°ÅŸlemi gerÃ§ekleÅŸtir                                         â”‚
â”‚  3. Sonucu cache'e kaydet (key + request_hash + response)       â”‚
â”‚  4. Response dÃ¶n                                                â”‚
â”‚                                                                  â”‚
â”‚  Ä°stek 2 (AynÄ± Idempotency-Key: abc123, aynÄ± body)              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚  1. Key cache'de var mÄ±? â†’ EVET                                 â”‚
â”‚  2. Request hash eÅŸleÅŸiyor mu? â†’ EVET                           â”‚
â”‚  3. Cache'deki response'u dÃ¶n (iÅŸlem tekrar YAPILMAZ)           â”‚
â”‚                                                                  â”‚
â”‚  Ä°stek 3 (AynÄ± key: abc123, FARKLI body)                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚
â”‚  1. Key cache'de var mÄ±? â†’ EVET                                 â”‚
â”‚  2. Request hash eÅŸleÅŸiyor mu? â†’ HAYIR                          â”‚
â”‚  3. 409 CONFLICT hatasÄ± dÃ¶n                                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Best Practices

```javascript
// Ä°yi: Her sipariÅŸ iÃ§in benzersiz key
Idempotency-Key: order-12345-payment-attempt-1

// KÃ¶tÃ¼: Sabit key (tÃ¼m iÅŸlemler aynÄ± gibi davranÄ±r)
Idempotency-Key: my-payment
```

---

## ğŸ’³ Kart Verisi GÃ¼venliÄŸi

### Tokenization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TOKENIZATION FLOW                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   MÃ¼ÅŸteri KartÄ±          Tokenization           Saklanan Veri   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                  â”‚
â”‚   4546 7812 3456 7890    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶    tok_xxxxxxxxxxxx       â”‚
â”‚                                                                  â”‚
â”‚   âœ… Token saklanÄ±r                                             â”‚
â”‚   âŒ Kart numarasÄ± SAKLANMAZ                                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Masking

| Veri | Ham | Maskeli |
|------|-----|---------|
| Kart No | 4546781234567890 | 4546\*\*\*\*\*\*\*\*7890 |
| CVV | 123 | \*\*\* |
| Email | ayse@email.com | a\*\*\*@email.com |

### Åifreleme

| Durum | Algoritma | Key Size |
|-------|-----------|----------|
| At Rest | AES-256-GCM | 256 bit |
| In Transit | TLS 1.3 | - |
| Webhook Signature | HMAC-SHA256 | 256 bit |

---

## ğŸ“‹ Audit Trail

### Log Ã–rneÄŸi

```json
{
  "timestamp": "2026-02-02T10:00:00.123Z",
  "correlationId": "corr-xxxx-xxxx",
  "merchantId": "TRENDYOL",
  "paymentId": "pay-xxxx-xxxx",
  "action": "AUTHORIZE",
  "status": "SUCCESS",
  "provider": "GARANTI_VPOS",
  "latencyMs": 245,
  "clientIp": "192.168.1.100",
  "userAgent": "Mozilla/5.0...",
  "requestHash": "sha256:xxxxx",
  "maskedCard": "4546****7890"
}
```

### Saklanan Bilgiler

| Bilgi | Saklama SÃ¼resi | AmaÃ§ |
|-------|----------------|------|
| API Logs | 90 gÃ¼n | Debugging |
| Transaction Logs | 7 yÄ±l | Compliance |
| Audit Logs | 10 yÄ±l | Legal |
| Error Logs | 30 gÃ¼n | Monitoring |

---

## âœ… Compliance Checklist

### PCI-DSS

| Gereksinim | Durum | AÃ§Ä±klama |
|------------|-------|----------|
| No PAN Storage | âœ… | Kart numarasÄ± saklanmaz |
| Encryption at Rest | âœ… | AES-256 |
| Encryption in Transit | âœ… | TLS 1.3 |
| Access Control | âœ… | Role-based access |
| Audit Logging | âœ… | Complete trail |
| Vulnerability Testing | âœ… | Regular pen-tests |

### KVKK (TÃ¼rkiye)

| Gereksinim | Durum |
|------------|-------|
| Veri minimizasyonu | âœ… |
| AÃ§Ä±k rÄ±za | âœ… |
| Silme hakkÄ± | âœ… |
| Veri taÅŸÄ±nabilirliÄŸi | âœ… |

### GDPR (AB)

| Gereksinim | Durum |
|------------|-------|
| Right to erasure | âœ… |
| Data portability | âœ… |
| Breach notification | âœ… |
| Privacy by design | âœ… |

---

## ğŸš¨ GÃ¼venlik Ä°ncident Response

### Severity Levels

| Level | AÃ§Ä±klama | Response Time |
|-------|----------|---------------|
| **P1 - Critical** | Data breach, system down | 15 dakika |
| **P2 - High** | Partial outage, security vuln | 1 saat |
| **P3 - Medium** | Performance degradation | 4 saat |
| **P4 - Low** | Minor issues | 24 saat |

### Incident Flow

```
Detection â†’ Triage â†’ Containment â†’ Eradication â†’ Recovery â†’ Lessons Learned
```

---

## ğŸ” GÃ¼venlik Testleri

### YapÄ±lan Testler

| Test TÃ¼rÃ¼ | SÄ±klÄ±k | Son Test |
|-----------|--------|----------|
| Penetration Test | YÄ±llÄ±k | 2026-01 |
| Vulnerability Scan | HaftalÄ±k | Otomatik |
| Code Review | Her PR | SÃ¼rekli |
| Dependency Audit | GÃ¼nlÃ¼k | Otomatik |

### GÃ¼venlik AraÃ§larÄ±

- **SAST:** SonarQube
- **DAST:** OWASP ZAP
- **Dependency Check:** Snyk
- **Secret Scanning:** GitGuardian

---

<div align="center">

[â† Ã–deme AkÄ±ÅŸÄ±](./03-PAYMENT-FLOW.md) | [Ä°ÅŸ DeÄŸeri â†’](./05-BUSINESS-VALUE.md)

</div>
